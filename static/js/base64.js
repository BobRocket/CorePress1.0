!function(root,factory){"object"==typeof exports?module.exports=exports=factory():"function"==typeof define&&define.amd?define(factory):window.BASE64=factory()}(0,function(){var BASE64_MAPPING=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],URLSAFE_BASE64_MAPPING=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","-","_"],_toBinary=function(ascii){for(var binary=[];ascii>0;){var b=ascii%2;ascii=Math.floor(ascii/2),binary.push(b)}return binary.reverse(),binary},_toDecimal=function(binary){for(var dec=0,p=0,i=binary.length-1;i>=0;--i){1==binary[i]&&(dec+=Math.pow(2,p)),++p}return dec},_toUTF8Binary=function(c,binaryArray){for(var diff=8-(c+1)+6*(c-1)-binaryArray.length;--diff>=0;)binaryArray.unshift(0);for(var binary=[],_c=c;--_c>=0;)binary.push(1);binary.push(0);for(var i=0,len=8-(c+1);i<len;++i)binary.push(binaryArray[i]);for(var j=0;j<c-1;++j){binary.push(1),binary.push(0);for(var sum=6;--sum>=0;)binary.push(binaryArray[i++])}return binary},_encode=function(str,url_safe){for(var base64_Index=[],binaryArray=function(str){for(var binaryArray=[],i=0,len=str.length;i<len;++i){var unicode=str.charCodeAt(i),_tmpBinary=_toBinary(unicode);if(unicode<128){for(var _tmpdiff=8-_tmpBinary.length;--_tmpdiff>=0;)_tmpBinary.unshift(0);binaryArray=binaryArray.concat(_tmpBinary)}else unicode>=128&&unicode<=2047?binaryArray=binaryArray.concat(_toUTF8Binary(2,_tmpBinary)):unicode>=2048&&unicode<=65535?binaryArray=binaryArray.concat(_toUTF8Binary(3,_tmpBinary)):unicode>=65536&&unicode<=2097151?binaryArray=binaryArray.concat(_toUTF8Binary(4,_tmpBinary)):unicode>=2097152&&unicode<=67108863?binaryArray=binaryArray.concat(_toUTF8Binary(5,_tmpBinary)):unicode>=4e6&&unicode<=2147483647&&(binaryArray=binaryArray.concat(_toUTF8Binary(6,_tmpBinary)))}return binaryArray}(str),dictionary=url_safe?URLSAFE_BASE64_MAPPING:BASE64_MAPPING,extra_Zero_Count=0,i=0,len=binaryArray.length;i<len;i+=6){var diff=i+6-len;2==diff?extra_Zero_Count=2:4==diff&&(extra_Zero_Count=4);for(var _tmpExtra_Zero_Count=extra_Zero_Count;--_tmpExtra_Zero_Count>=0;)binaryArray.push(0);base64_Index.push(_toDecimal(binaryArray.slice(i,i+6)))}var base64="";for(i=0,len=base64_Index.length;i<len;++i)base64+=dictionary[base64_Index[i]];for(i=0,len=extra_Zero_Count/2;i<len;++i)base64+="=";return base64},_decode=function(_base64Str,url_safe){var _len=_base64Str.length,extra_Zero_Count=0,dictionary=url_safe?URLSAFE_BASE64_MAPPING:BASE64_MAPPING;"="==_base64Str.charAt(_len-1)&&("="==_base64Str.charAt(_len-2)?(extra_Zero_Count=4,_base64Str=_base64Str.substring(0,_len-2)):(extra_Zero_Count=2,_base64Str=_base64Str.substring(0,_len-1)));for(var binaryArray=[],i=0,len=_base64Str.length;i<len;++i)for(var c=_base64Str.charAt(i),j=0,size=dictionary.length;j<size;++j)if(c==dictionary[j]){var _tmp=_toBinary(j),_tmpLen=_tmp.length;if(6-_tmpLen>0)for(var k=6-_tmpLen;k>0;--k)_tmp.unshift(0);binaryArray=binaryArray.concat(_tmp);break}return extra_Zero_Count>0&&(binaryArray=binaryArray.slice(0,binaryArray.length-extra_Zero_Count)),function(binaryArray){for(var unicode,unicodeBinary=[],str="",i=0,len=binaryArray.length;i<len;)if(0==binaryArray[i])unicode=_toDecimal(binaryArray.slice(i,i+8)),str+=String.fromCharCode(unicode),i+=8;else{for(var sum=0;i<len&&1==binaryArray[i];)++sum,++i;for(unicodeBinary=unicodeBinary.concat(binaryArray.slice(i+1,i+8-sum)),i+=8-sum;sum>1;)unicodeBinary=unicodeBinary.concat(binaryArray.slice(i+2,i+8)),i+=8,--sum;unicode=_toDecimal(unicodeBinary),str+=String.fromCharCode(unicode),unicodeBinary=[]}return str}(binaryArray)};return{encode:function(str){return _encode(str,!1)},decode:function(base64Str){return _decode(base64Str,!1)},urlsafe_encode:function(str){return _encode(str,!0)},urlsafe_decode:function(base64Str){return _decode(base64Str,!0)}}});